<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>AI Database Search</title>
  <style>
    body { background:#0f172a; color:white; font-family:Arial; padding:40px; max-width:900px; margin:auto; }
    textarea { width:100%; height:120px; background:#1e293b; color:white; padding:12px; border-radius:6px; }
    button { margin-top:10px; padding:12px 20px; font-size:16px; cursor:pointer; }
    pre { margin-top:20px; background:#020617; padding:16px; border-radius:6px; }
  </style>
</head>
<body>

<h1>AI Database Search</h1>
<textarea id="q" placeholder="List all counsellors in Europe"></textarea>
<button onclick="run()">Ask</button>
<pre id="out">Waiting…</pre>

<script>
const FUNCTION_URL = "https://yhuskpncfazxdikklkdk.supabase.co/functions/v1/ai-search";

async function run() {
  const q = document.getElementById("q").value.trim();
  const out = document.getElementById("out");

  if (!q) return out.textContent = "Type a question.";

  out.textContent = "Working…";

  try {
    const res = await fetch(FUNCTION_URL, {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify({ question: q })
    });

    const json = await res.json();
    out.textContent = json.answer || JSON.stringify(json, null, 2);
  } catch {
    out.textContent = "Network failure.";
  }
}
</script>

</body>
</html>
